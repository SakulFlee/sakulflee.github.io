<!doctype html><html lang=en><head><meta charset=utf-8><meta content="My personal blog and archive for projects and interest I enjoy." name=description><meta content="@SakulFlee | @Sakul6499 | Lukas Weber" name=author><meta content="width=device-width,initial-scale=1" name=viewport><link href=/style.css rel=stylesheet><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel=stylesheet><script defer src=https://use.fontawesome.com/releases/v5.3.1/js/all.js></script><script defer src=/bulma-menu.js></script><link href=/favicon.ico rel=icon><title>
    
    
    @SakulFlee | @Sakul6499 | Lukas Weber
    
    
</title><body><nav aria-label="main navigation" class=navbar role=navigation><div class=navbar-brand><a class=navbar-item href=/> <span class="title is-5">@SakulFlee | @Sakul6499 | Lukas Weber</span> </a><a class="navbar-burger burger" aria-expanded=false aria-label=menu data-target=main-nav role=button> <span aria-hidden=true></span> <span aria-hidden=true></span> <span aria-hidden=true></span> </a></div><div class=navbar-menu id=main-nav><div class=navbar-start><a class=navbar-item href=/> <span class="icon is-large"> <i class="fas fa-home"></i> </span> <span>Home</span> </a><a class=navbar-item href=/blog> <span class="icon is-large"> <i class="fas fa-book"></i> </span> <span>Blog</span> </a><a class=navbar-item href=/projects> <span class="icon is-large"> <i class="fas fa-code-branch"></i> </span> <span>Projects</span> </a></div></div></nav><article id=blog-post><section class="hero is-dark"><div class=hero-body><div class=container><h1 class=title>Properly exporting glTF from Blender (3.4+) for use with Bevy (0.9+)</h1><h2 class=subtitle>This post explains how to properly export and integrate models from Blender to Bevy using the glTF file format. Furthermore, we include scripts to automate these tasks.</h2><div class=columns><div class="column is-half has-text-left"><p><b>Categories</b></p><span> <a class="tag is-success" href=/categories/Guide> Guide </a> </span></div><div class="column is-half has-text-right has-text-left-mobile"><p><b>Tags</b></p><span> <a class="tag is-danger" href=/tags/Blender> Blender </a> <a class="tag is-danger" href=/tags/Bevy> Bevy </a> <a class="tag is-danger" href=/tags/Rust> Rust </a> <a class="tag is-danger" href=/tags/Python> Python </a> </span></div></div><span class="columns has-text-centered"> <p class="column is-4">Published on: 2023-01-07</p> <p class="column is-4">Word count: 3207</p> <p class="column is-4">Estimated reading time: 17 minutes</p> </span></div></div></section><div class="card m-4"><div class="card-content content"><ul><li><a href=sakulflee.github.io/blog/bevy-blender-export/#context>Context</a><li><a href=sakulflee.github.io/blog/bevy-blender-export/#why-gltf>Why glTF</a><li><a href=sakulflee.github.io/blog/bevy-blender-export/#exporting>Exporting</a> <ul><li><a href=sakulflee.github.io/blog/bevy-blender-export/#project-setup>Project Setup</a><li><a href=sakulflee.github.io/blog/bevy-blender-export/#manual-exporting>Manual Exporting</a><li><a href=sakulflee.github.io/blog/bevy-blender-export/#bevy-usage>Bevy Usage</a><li><a href=sakulflee.github.io/blog/bevy-blender-export/#adding-materials>Adding materials</a><li><a href=sakulflee.github.io/blog/bevy-blender-export/#advice-for-blender-project-organization>Advice for Blender Project organization</a><li><a href=sakulflee.github.io/blog/bevy-blender-export/#automated-exporting>Automated Exporting</a> <ul><li><a href=sakulflee.github.io/blog/bevy-blender-export/#bake-script>Bake Script</a><li><a href=sakulflee.github.io/blog/bevy-blender-export/#gltf-export-script>glTF Export Script</a></ul></ul><li><a href=sakulflee.github.io/blog/bevy-blender-export/#afterwords>Afterwords</a></ul><h2 id=context>Context</h2><p><a href=https://bevyengine.org/>Bevy</a> (or <a href=https://bevyengine.org/>Bevy-Engine</a>) is<blockquote><p>“A refreshingly simple data-driven game engine built in <a href=https://www.rust-lang.org/>Rust</a> Free and Open Source Forever!”<p>– <a href=https://bevyengine.org/>Bevy</a></blockquote><p>Many people turn to <a href=https://www.blender.org/>Blender</a>, a Free and Open-Source 3D-Suite, when creating assets for their <a href=https://bevyengine.org/>Bevy</a> game.<br> And there is the problem: Blender uses it’s own file format <code>.blend</code>, while also being able to export into many different formats like <code>.obj</code>, <code>.fbx</code>, <code>.gltf</code> and many more.<br> <em><a href=https://www.blender.org/>Blender</a> can also render images and whole movies.</em><p>The question now becomes:<blockquote><p>What is the best format to use when exporting from <a href=https://www.blender.org/>Blender</a> to be used with <a href=https://bevyengine.org/>Bevy</a>, and how is this done the best way?</blockquote><p>Before we head into any details I want to make my intentions clear:<p>First of all, I had trouble finding any up-to-date resource on this. There are a few blog posts explaining (very) roughly how to do this, but none is up-to-date as of writing this and all came with a lot of problems. This blog-post is intended to be an up-to-date resource for others.<p>Secondly, this guide is written for <a href=https://www.blender.org/>Blender</a> version 3.4 and <a href=https://bevyengine.org/>Bevy</a> 0.9.<br> Both, <a href=https://www.blender.org/>Blender</a> and <a href=https://bevyengine.org/>Bevy</a>, are still working on glTF support.<br> Thus, things may change in the future.<p>Thirdly, my goal was also to automate this process using <a href=https://www.python.org/>Python</a> scripts.<br> Said scripts will be included here and can be freely used if credited.<p>Lastly, this guide expects some very basic skills in <a href=https://www.blender.org/>Blender</a>, <a href=https://bevyengine.org/>Bevy</a> and <a href=https://www.rust-lang.org/>Rust</a>. The python scripts can be used without any <a href=https://www.python.org/>Python</a> knowledge.<blockquote><p>If you run into any trouble, need help or found an issue with my write-up, please <a href=https://github.com/Sakul6499/sakul6499.github.io/issues/new>open an issue</a> or <a href=https://github.com/Sakul6499/sakul6499.github.io/discussions/new>start a discussion</a> on my <a href=https://github.com/Sakul6499/sakul6499.github.io>GitHub repository</a>!</blockquote><h2 id=why-gltf>Why glTF</h2><p><a href=https://www.blender.org/>Blender</a> and <a href=https://bevyengine.org/>Bevy</a> both support many different formats. Choosing the right one can be a challenging task.<p>The main problem with most formats is that they are proprietary. Usually meaning: hard to license and official parsers and writers are either closed source or don’t exist at all. This often leads to partial implementations of said parsers/writers which may or may not work and different applications may use different parsers/writers making them incompatible with each other.<p><a href=https://www.khronos.org/gltf/>glTF</a> is different in those regards.<blockquote><p>glTF™ is a royalty-free specification for the efficient transmission and loading of 3D scenes and models by engines and applications. glTF minimizes the size of 3D assets, and the runtime processing needed to unpack and use them. glTF defines an extensible, publishing format that streamlines authoring workflows and interactive services by enabling the interoperable use of 3D content across the industry.<p>– <a href=https://www.khronos.org/gltf/>Khronos Group glTF</a></blockquote><p>This is ideal for us! Not only area there official libraries, but the whole standard is defined in a <a href=https://registry.khronos.org/glTF/>specification document</a> readable by everyone. This enables glTF to be used universally.<p><a href=https://www.khronos.org/gltf/>glTF</a> also supports three versions of it’s format:<ul><li><code>.gltf</code>: A JSON-like format that describes everything in a human-readable fashion. Slower to process and read but easier to debug and change things quick (if you aren’t exporting them).<li><code>.glb</code>: A binary format that is optimized for loading and streaming inside engines.<li><code>.gltf + .bin</code>: A mixture of both where the main values (like settings, locations, etc.) are stored in a JSON-like format (<code>.gltf</code>) and things like models, meshes, textures, meshes are compressed into a binary (<code>.bin</code>). However, loosing either of the files invalidates the whole file.</ul><p>Additionally, <a href=https://www.khronos.org/gltf/>glTF</a> supports a wide range of things you can pack into it.<br> Primarily, we are interested in:<ul><li>Models<li>Meshes<li>Textures<li>Materials<li>Scenes</ul><p>And luckily <a href=https://www.khronos.org/gltf/>glTF</a> can do all of this! … with some caveats as we will find out.<p>However, there is also a downside:<br> <a href=https://www.khronos.org/gltf/>glTF</a> is relatively new (as of writing this) format. While <a href=https://www.blender.org/>Blender</a> and <a href=https://bevyengine.org/>Bevy</a> both implement it, there are features missing on both ends. However, there are also lots of workarounds for those missing features. <a href=https://www.khronos.org/gltf/>glTF</a> is currently very well priced as <em>THE next format</em> in anything that uses graphical engines and is very likely to be fully implemented within no time at all.<h2 id=exporting>Exporting</h2><p>This guide will cover two ways of exporting <a href=https://www.khronos.org/gltf/>glTF</a> from <a href=https://www.blender.org/>Blender</a> to be used by <a href=https://bevyengine.org/>Bevy</a>:<ul><li>Manual Exporting<li>Automated Exporting</ul><p>Both ways require the same setup, but we will start with manual exporting to show the full workflow. Let’s start there.<h3 id=project-setup>Project Setup</h3><p>First, let’s create a new Blender Project and add some model. You can delete or keep the default cube, camera and light, or delete them. important point is to have a or multiple model in your project like so:<p><img alt="Blender example project" src=/bevy_blender_export/blender_example_project.png><h3 id=manual-exporting>Manual Exporting</h3><p>With this setup, we can click on <code>File > Export > glTF</code> in the top left corner:<p><img alt="Blender export menu" src=/bevy_blender_export/blender_export_menu.png><p>In the new menu we can select a location for the <a href=https://www.khronos.org/gltf/>glTF</a> to be saved, but before clicking on export look to the right side! These settings are <strong>essential</strong> for <a href=https://bevyengine.org/>Bevy</a> to properly import this model.<p>First of all, you can choose the format there like mentioned above:<p><img alt="glTF format menu" src=/bevy_blender_export/gltf_format_menu.png><p>This format is for you to choose, <a href=https://bevyengine.org/>Bevy</a> will work with any of the three.<p>Next, make sure to have these settings:<p><img alt="glTF format menu" src=/bevy_blender_export/gltf_settings.png><blockquote><p>Tip: If you select “Remember Export Settings” at the top under Copyright Blender will remember these settings in this <code>.blend</code> file. Making exporting much faster in the future.</blockquote><p>Here is a short overview:<p><code>Include > Limit to</code> defines what gets into the <a href=https://www.khronos.org/gltf/>glTF</a> file.<br> It doesn’t matter what you chose here, but generally <code>Visible Objects</code> is a good choice. You can hide whatever you don’t want in your <a href=https://www.khronos.org/gltf/>glTF</a>.<p><code>Include > Data</code> defines what data is included. Check <code>Custom Properties</code>, this includes extra data and makes it easier work with glTF inside <a href=https://www.blender.org/>Blender</a> later. You can export Lights and Cameras from Blender but you loose control over them inside <a href=https://bevyengine.org/>Bevy</a>.<br> Furthermore, specific files like a scene or player may include those, but <strong>don’t pack cameras and lights into every mesh export you do</strong>.<p><code>Transform > +Y Up</code> should be checked.<br> This is the orientation Bevy uses.<p><code>Data > Mesh</code> defines how our <em>Mesh</em> is exported.<br> Check whatever you need. However, it may be a good idea to export “everything but Loose*” by default to ensure the model is in <a href=https://bevyengine.org/>Bevy</a> as close as possible to <a href=https://www.blender.org/>Blender</a>.<p><code>Data > Material</code> defines how our <em>Materials</em> are exported. Set <code>Materials</code> to <code>Export</code> and <code>Images</code> to <code>Automatic</code>. This will export <strong>all</strong> used Materials by default and convert them if needed.<blockquote><p>Note that <a href=https://www.blender.org/>Blender</a> currently only exports in PNG and if it’s another format they will be converted to either PNG or JPEG. Something like KTX2 or DDS are much better for graphical engines but are nto yet supported by <a href=https://www.blender.org/>Blender</a>. <a href=https://bevyengine.org/>Bevy</a> needs a special feature flag for those.</blockquote><p><code>Data > PBR Extensions</code> defines how PBR Materials are exported.<br> I couldn’t find a difference between the options. Exporting with the <a href=https://www.blender.org/>Blender</a> default will <em>probably</em> get you the closest to how it looks in <a href=https://www.blender.org/>Blender</a>.<p><code>Data > Lighting</code> defines how lighting is exported. <code>Standard</code> light works very well with <a href=https://bevyengine.org/>Bevy</a>.<p><code>Data > Compression</code> defines if the <a href=https://www.khronos.org/gltf/>glTF</a> is compressed (if the format <code>.glb</code> or <code>.gltf + .bin</code> is selected).<br> <strong><a href=https://bevyengine.org/>Bevy</a> does not support this compression at the moment.</strong> <strong>Thus, turn this off!</strong><p><code>Animation</code> defines how <em>Animations</em> are exported. Let them at default settings, this guide is not about Animation exports.<p>With this we can hit the <code>Export glTF</code> button and save the file.<h3 id=bevy-usage>Bevy Usage</h3><p>Inside your <a href=https://bevyengine.org/>Bevy</a> project we need to define a new <em>System</em>:<pre class=language-rust data-lang=rust style=color:#c0c5ce;background-color:#2b303b><code class=language-rust data-lang=rust><span style=color:#b48ead>fn </span><span style=color:#8fa1b3>scene_renderer</span><span>(
</span><span>    </span><span style=color:#b48ead>mut </span><span style=color:#bf616a>commands</span><span>: Commands,
</span><span>    </span><span style=color:#bf616a>assets</span><span>: Res&LTAssetServer>,
</span><span>) {
</span><span>    </span><span style=color:#65737e>// ...
</span><span>}
</span></code></pre><p>Now all we need to do to load out <a href=https://www.khronos.org/gltf/>glTF</a> file is:<ol><li>Load it with the <code>AssetServer</code><li>Tell <code>Commands</code> to spawn a <code>SceneBundle</code></ol><pre class=language-rust data-lang=rust style=color:#c0c5ce;background-color:#2b303b><code class=language-rust data-lang=rust><span>commands.</span><span style=color:#96b5b4>spawn</span><span>(SceneBundle {
</span><span>    scene: assets.</span><span style=color:#96b5b4>load</span><span>("</span><span style=color:#a3be8c>assets/scene.gltf#Scene0</span><span>"),
</span><span>    ..</span><span style=color:#96b5b4>default</span><span>()
</span><span>});
</span></code></pre><blockquote><p>In this case I exported the <a href=https://www.khronos.org/gltf/>glTF</a> file into <code>assets/scene.gltf</code>. Your file may be with a <code>.glb</code> extension if you choose the binary format and may be in a different path. Adjust accordingly.</blockquote><p>Now there is one weird bit here: The <code>#Scene0</code> at the end.<br> As we established, <a href=https://www.khronos.org/gltf/>glTF</a> supports a wide range of use cases. The hashtag (<code>#</code>) tells the <code>AssetServer</code> to not load the whole file, but a specific section of that file. In our case we load <code>Scene0</code> which is always the first and default scene of this file. There could be multiple scenes in our <a href=https://www.khronos.org/gltf/>glTF</a> and we could access them with <code>Scene1</code>, <code>Scene2</code>, …, <code>SceneX</code>.<br> <strong>It’s important to know that if you don’t add the <code>#Scene0</code> (or similar) to the file-path, <a href=https://bevyengine.org/>Bevy</a> will load the <em>whole</em> file and will require you to do some more manual work on what needs to be spawned where.</strong><blockquote><p>Furthermore, we could load <em>just</em> the <em>Mesh</em> with <code>#Mesh0</code>.<br> Export to <code>.gltf</code> (JSON-like format) and open it in your code editor if you are curious about what there is.</blockquote><p>Now all we need to do is call this <em>System</em> like so:<pre class=language-rust data-lang=rust style=color:#c0c5ce;background-color:#2b303b><code class=language-rust data-lang=rust><span>app.</span><span style=color:#96b5b4>add_startup_system</span><span>(</span><span style=color:#b48ead>Self</span><span>::scene_render); 
</span></code></pre><p>Below you will find the full example. However, your implementation may vary wildly of this. I’d also recommend putting this into a plugin and calling it based on an <code>AppState</code>.<pre class=language-rust data-lang=rust style=color:#c0c5ce;background-color:#2b303b><code class=language-rust data-lang=rust><span style=color:#b48ead>fn </span><span style=color:#8fa1b3>scene_renderer</span><span>(
</span><span>    </span><span style=color:#b48ead>mut </span><span style=color:#bf616a>commands</span><span>: Commands,
</span><span>    </span><span style=color:#bf616a>assets</span><span>: Res&LTAssetServer>,
</span><span>) {
</span><span>    commands.</span><span style=color:#96b5b4>spawn</span><span>(SceneBundle {
</span><span>        scene: assets.</span><span style=color:#96b5b4>load</span><span>("</span><span style=color:#a3be8c>assets/scene.gltf#Scene0</span><span>"),
</span><span>        ..</span><span style=color:#96b5b4>default</span><span>()
</span><span>    });
</span><span>}
</span><span>
</span><span style=color:#65737e>// Somewhere in our plugin init _or_ main
</span><span>app.</span><span style=color:#96b5b4>add_startup_system</span><span>(</span><span style=color:#b48ead>Self</span><span>::scene_render); 
</span></code></pre><p>That’s it. You should see your model appear inside <a href=https://bevyengine.org/>Bevy</a>.<p>If you can’t see it take a look into <a href=https://bevyengine.org/>Bevy</a>’s log and check if the path and export is correct.<br> You can also open a new Blender project and <code>File > Import > glTF</code> to validate what was exported!<h3 id=adding-materials>Adding materials</h3><p>Now… this seemed to simple, didn’t it?<p>If you now add a simple <em>Material</em> to your <em>Model</em> in <a href=https://www.blender.org/>Blender</a> everything will work fine.<br> But just one colour is kinda boring, isn’t it?<p>Try using the <em>Shading Nodes</em> in <a href=https://www.blender.org/>Blender</a> for your Material.<br> Inside <a href=https://www.blender.org/>Blender</a> it will look fine, no matter what you do. Try exporting it as a <a href=https://www.khronos.org/gltf/>glTF</a> and then reimport into <a href=https://www.blender.org/>Blender</a>.<br> Still, everything looks fine (assuming you applied the export settings correctly).<p>But now try importing the <a href=https://www.khronos.org/gltf/>glTF</a> into <a href=https://bevyengine.org/>Bevy</a>.<br> There are <em>some</em> (very little) things that will work inside <a href=https://bevyengine.org/>Bevy</a>. You may be lucky and it just works, but that’s a rare case. Most likely you will get a <code>StandardMaterial</code> inside Bevy that has a light-yellow standard colour. That’s no good.<p>The problem is that <a href=https://www.blender.org/>Blender</a> has it’s shading nodes and <em>some</em> (but rarely if at all) translate to <a href=https://www.khronos.org/gltf/>glTF</a> shading, while <a href=https://bevyengine.org/>Bevy</a> has it’s own <em>Material</em> and <em>Shading</em> system. Again, some of <a href=https://www.khronos.org/gltf/>glTF</a> features include <em>Materials</em> and <em>Shading</em> but neither does <a href=https://www.blender.org/>Blender</a> export it “correctly” at the moment, nor does <a href=https://bevyengine.org/>Bevy</a> import it “correctly”.<br> In the future <a href=https://www.blender.org/>Blender</a> and <a href=https://bevyengine.org/>Bevy</a> may play nicely with <a href=https://www.khronos.org/gltf/>glTF</a> <em>Materials</em>.<p>Now how do we fix this?<br> The solution sounds complicated at first but is actually a very easy process!<br> Here is what we need to do:<ol><li>Create a uniform object to apply our <em>Material</em> on (e.g. <code>Plane</code>).<li>Apply our <em>Material</em> on this object.<li>Inside the <em>Material</em> create a <code>Texture Node</code> (no need to attach it).<li>Create a new <em>Texture</em> from the <code>Texture Node</code>.<li><strong>Change <a href=https://www.blender.org/>Blender</a> to <em>Cycles</em> (<code>Render Properties > Render Engine</code>)</strong>.<li>Under <code>Render Properties > Bake</code> make some changes and hit the <code>Bake</code> button.<li>Ensure <a href=https://www.blender.org/>Blender</a> bundles <em>Textures</em> (<code>File > External Data > Automatically Pack Resources</code>) (or: Save the <em>Texture</em> externally).<li>Go back to our original object and add a new <em>Material</em>.<li>Open the new <em>Material</em> in the <em>Shading Nodes</em>.<li>Import the created <em>Texture</em> and use it as our Color.</ol><blockquote><p>Note that this only covers the “Diffuse” Map (i.e. color), but you can repeat those steps for e.g. Normals, Roughness, etc.</blockquote><p>How does this work? How does this change things?<br> Simple! The “baking” creates a <em>Texture</em> for us. This <em>Texture</em> is then imported and used as our <em>Material</em>. <a href=https://www.khronos.org/gltf/>glTF</a> supports <em>Textures</em> and so does <a href=https://bevyengine.org/>Bevy</a>! When importing into <a href=https://bevyengine.org/>Bevy</a>, the <em>Texture</em> will be unpacked from the <a href=https://www.khronos.org/gltf/>glTF</a> and applied. No custom <a href=https://www.blender.org/>Blender</a> nodes involved!<p>The downside of this is that we now have a two-step process:<ol><li><code>Bake</code> the <em>Texture</em>.<li>Export to <a href=https://www.khronos.org/gltf/>glTF</a>.</ol><p>However, if there hasn’t been changes to the <em>Material</em> there is no need to <code>Bake</code>!<br> Assuming <a href=https://www.blender.org/>Blender</a> packed the <em>Texture</em> correctly first time.<p>Now let’s see how this is done:<p>First, we need to create a uniform object in <a href=https://www.blender.org/>Blender</a>.<br> For our use-case a <em>Plane</em> works the best, but other use-cases may use any other shapes.<blockquote><p>Make sure to disable Viewing and Rendering of the original <em>Object</em>!</blockquote><p><img alt="Add plane in Blender" src=/bevy_blender_export/blender_plane.png><p>Next, we apply the <em>Material</em> (or create a new one) to the <em>Object</em>:<p><img alt="Blender Material" src=/bevy_blender_export/blender_material.png><p>Now, we a <em>Image Texture</em> Node and create a new Image:<p><img alt="Blender Add Image-Texture" src=/bevy_blender_export/blender_add_image_texture.png><blockquote><p>You should change the Name and Resolution of this Texture.<br> 1024 x 1024 = 1k Textures<br> 4096 x 4096 = 4k Textures<br> etc.</blockquote><p>Change into Cycles if not already done:<p><img alt="Blender change to Cycles" src=/bevy_blender_export/blender_change_to_cycles.png><blockquote><p>If you can it’s recommended to set Cycles to use your GPU. This will reduce rendering times by a lot.</blockquote><p>Scroll down to find the <code>Bake</code> settings and apply the following:<p><img alt="Blender Bake Settings" src=/bevy_blender_export/blender_bake_settings.png><blockquote><p>In our case we <strong>just</strong> want the color values, no shading, light, whatsoever. You may change this based on what your <em>Texture</em> needs.</blockquote><p>Pay attention to the <code>Bake Type</code> too!<p><img alt="Blender Bake Type" src=/bevy_blender_export/blender_bake_type.png><p>By default this will be <code>Combined</code>.<br> Like the name suggest, this combines all (most?) of the <code>Bake Types</code> into one image.<p>This may be useful if you want to extract multiple <em>Texture Maps</em> from one <em>Texture</em> later. But for our use-case we <em>just</em> want the Colors. This is called the <em>Diffuse Map/Texture</em>.<p>Alternatively, instead of using the <code>Combined</code> <code>Bake Type</code>, we can repeat the same process multiple times for each <code>Bake Type</code> we need.<p>Now hit the <code>Bake</code> button atop and wait!<br> At the bottom there will be a progress bar, depending on your hardware and <em>Texture</em> resolution this may take a bit.<p>Once done, you can view the <em>Texture</em> in the <em>Image View</em>:<p><img alt="Result: Brick Texture" src=/bevy_blender_export/BrickTexture.png><p>Double check that everything is looking as it should.<p>Now, we go back to our original <em>Object</em> and create a new “Fake” <em>Material</em>:<p><img alt="Blender add new Fake Material" src=/bevy_blender_export/blender_add_new_material.png><blockquote><p>Make sure to disable viewing and rendering of the Plane and re-enable it for the <em>Object</em>!</blockquote><p>Lastly, open this “Fake” <em>Material</em> as <em>Shading Nodes</em>, add the <code>Image Texture</code> Node and select (from the list, not “Open”!) the generated <em>Texture</em>. (Or, if you saved your <em>Texture</em> externally, click on “Open” and import it!)<br> Then hookup the Color like so:<p><img alt="Blender add Texture to Fake Material" src=/bevy_blender_export/blender_add_texture_to_fake_material.png><blockquote><p>If you have multiple textures, e.g. for Normals, repeat this step with the other textures and/or extract it from the <code>Combined</code> <em>Texture</em>.</blockquote><p>If everything was done right the <em>Texture</em> should appear on the <em>Object</em>.<p>Now, optionally, based on your <em>Object</em>, you may still need to adjust UV Maps:<p><img alt="Blender UV Map" src=/bevy_blender_export/blender_uv.png><p>If you now export from <a href=https://www.blender.org/>Blender</a> to <a href=https://www.khronos.org/gltf/>glTF</a> like above and import the <a href=https://www.khronos.org/gltf/>glTF</a> into <a href=https://bevyengine.org/>Bevy</a>, everything should be working perfectly fine.<h3 id=advice-for-blender-project-organization>Advice for Blender Project organization</h3><p>Now that everything is exporting as it should, let me give some advice:<p><em>Textures/Materials</em> are commonly used multiple times per different <em>Objects</em>. With this current setup the <em>Material</em>, Plane Setup, etc. would have to be repeated <strong>for each <em>Object</em> Blender Project</strong>. This will make organizing much more complicated, Baking must be done in different steps and re-using <em>Textures/Materials</em> is complicated if not impossible.<p>To solve this and make it <strong>much</strong> easier to keep organized we can use the fact that <a href=https://www.khronos.org/gltf/>glTF</a> can be universally used for <em>Models/Meshes</em>, <em>Materials/Textures</em> and <em>Scenes</em>. And that’s exactly what I am suggesting!<p>Create (for this project) three Blender Projects:<ul><li>One for the <em>Material/Texture</em>, includes the Baking process and packs the Texture inside the <code>.blend</code>.<li>One for the <em>Model/Mesh</em> itself, will link against the Baked <em>Texture</em> from the first file.<li>One for the <em>Scene</em>, where all the <em>Models/Meshes</em> are organized and put together into a <em>Scene</em> that can be imported into <a href=https://bevyengine.org/>Bevy</a>.</ul><p>The beauty of this approach is that for as long as the linked <code>.blend</code> files are in tact and the paths didn’t change (which can be relative!), we only need to export from the <em>Scene</em> Blender Project.<br> This export will automatically fetch everything needed from the linked files. This includes <em>Materials/Textures</em>, <em>Models/Meshes</em> and everything that is required to successfully export.<p>The only downside of this is that we are now working with three files.<br> For each <em>Material</em> we would add a new Project File.<br> For each <em>Model</em> we would add a new Project File.<br> And we can’t edit linked Files from the <em>Scene</em>, but have to open the e.g. <em>Material</em> file itself.<p>We also need to make sure that changes are detected upstream. Meaning since we have this dependency order: <code>Scene -> Mesh -> Material</code>. And we change the <code>Material</code> (and bake it!), we need to make sure that our <code>Mesh</code> <strong>and</strong> the <code>Scene</code> gets updated with this change.<br> This <em>should</em> work out of the box with <a href=https://www.blender.org/>Blender</a>, but just to be sure I may suggest keeping the total linked File-Count low.<h3 id=automated-exporting>Automated Exporting</h3><p>Finally we reached the automation part. <a href=https://www.blender.org/>Blender</a> does this quite easily actually.<br> <a href=https://www.blender.org/>Blender</a> gives us a fully features Python API. Everything you can do in the <a href=https://www.blender.org/>Blender</a> UI, you can do with the Python API.<br> Just… possibly a bit more complicated.<p>I have written two scripts, partially sourced from StackOverflow, that solve two issues:<p>Firstly, <code>Bake</code> <em>Materials</em> into <em>Textures</em>. This <em>may</em> only work if you are following the above suggestion of splitting the project into multiple Blender Files. For as long as there is just one <em>Object</em> and one <em>Material</em>, it should work flawlessly with any file. Even with multiple <em>Texture</em> outputs.<br> The <em>Texture</em> result will be <strong>packed into the <code>.blend</code> file</strong>.<p>Secondly, export a <em>Mesh/Model</em> (or <em>Scene</em>!) from <a href=https://www.blender.org/>Blender</a> to <a href=https://www.khronos.org/gltf/>glTF</a>. The script will automatically apply all the settings and even save them for future manual exports.<br> The exact output location can be chosen via an argument.<h4 id=bake-script>Bake Script</h4><p>Save the file below and use it like so:<pre class=language-shell data-lang=shell style=color:#c0c5ce;background-color:#2b303b><code class=language-shell data-lang=shell><span>blender your_blender_file.blend --background --python bake_all.py
</span></code></pre><p>This will automatically <code>Bake</code> and pack for us.<pre class=language-python data-lang=python style=color:#c0c5ce;background-color:#2b303b><code class=language-python data-lang=python><span style=color:#65737e># Loosely based on:
</span><span style=color:#65737e># - (baking) https://blender.stackexchange.com/a/10861
</span><span style=color:#65737e># - (saving) https://blender.stackexchange.com/a/143043
</span><span>
</span><span style=color:#b48ead>import </span><span>os
</span><span style=color:#b48ead>import </span><span>sys
</span><span style=color:#b48ead>import </span><span>bpy
</span><span>
</span><span style=color:#bf616a>BLEND_FILE_ARG </span><span>= sys.argv[</span><span style=color:#d08770>1</span><span>]
</span><span style=color:#bf616a>BLEND_FILE </span><span>= os.path.</span><span style=color:#bf616a>abspath</span><span>(</span><span style=color:#bf616a>BLEND_FILE_ARG</span><span>)
</span><span>
</span><span style=color:#96b5b4>print</span><span>("</span><span style=color:#a3be8c>Processing '</span><span>" + </span><span style=color:#bf616a>BLEND_FILE_ARG </span><span>+ "</span><span style=color:#a3be8c>' (</span><span>" + </span><span style=color:#bf616a>BLEND_FILE </span><span>+ "</span><span style=color:#a3be8c>) and packing afterwards ...</span><span>");
</span><span>
</span><span>scene = bpy.context.scene
</span><span style=color:#96b5b4>print</span><span>("</span><span style=color:#a3be8c>Scene: </span><span>" + scene.name)
</span><span>
</span><span style=color:#65737e># Clear selection
</span><span style=color:#b48ead>for </span><span>object </span><span style=color:#b48ead>in </span><span>scene.objects:
</span><span>    object.</span><span style=color:#bf616a>select_set</span><span>(</span><span style=color:#d08770>False</span><span>)
</span><span>
</span><span style=color:#65737e># Bake
</span><span style=color:#b48ead>for </span><span>object </span><span style=color:#b48ead>in </span><span>scene.objects:
</span><span>    </span><span style=color:#96b5b4>print</span><span>("</span><span style=color:#a3be8c>Object: </span><span>" + object.name)
</span><span>
</span><span>    </span><span style=color:#65737e># Make the object active
</span><span>    bpy.context.view_layer.objects.active = object
</span><span>    object.</span><span style=color:#bf616a>select_set</span><span>(</span><span style=color:#d08770>True</span><span>)
</span><span>
</span><span>    </span><span style=color:#65737e># https://docs.blender.org/api/current/bpy.ops.object.html#bpy.ops.object.bake
</span><span>    bpy.ops.object.</span><span style=color:#bf616a>bake</span><span>(
</span><span>        </span><span style=color:#bf616a>type </span><span>= '</span><span style=color:#a3be8c>UV</span><span>', 
</span><span>        </span><span style=color:#bf616a>use_clear </span><span>= </span><span style=color:#d08770>True</span><span>,
</span><span>        </span><span style=color:#65737e># https://docs.blender.org/api/current/bpy_types_enum_items/bake_pass_type_items.html#rna-enum-bake-pass-type-items
</span><span>        </span><span style=color:#bf616a>save_mode </span><span>= '</span><span style=color:#a3be8c>INTERNAL</span><span>',
</span><span>    )
</span><span>
</span><span>    </span><span style=color:#65737e># Unselect after
</span><span>    object.</span><span style=color:#bf616a>select_set</span><span>(</span><span style=color:#d08770>False</span><span>)
</span><span>
</span><span style=color:#65737e># Pack it!
</span><span>bpy.ops.file.</span><span style=color:#bf616a>pack_all</span><span>() </span><span style=color:#65737e>#Pack all images into the file
</span><span>
</span><span style=color:#65737e># Save it!
</span><span>bpy.ops.wm.</span><span style=color:#bf616a>save_as_mainfile</span><span>(</span><span style=color:#bf616a>filepath</span><span>=bpy.data.filepath)
</span></code></pre><h4 id=gltf-export-script>glTF Export Script</h4><p>Save the file below and use it like so:<pre class=language-shell data-lang=shell style=color:#c0c5ce;background-color:#2b303b><code class=language-shell data-lang=shell><span>blender your_blender_file.blend --background --python gltf_export.py -- your_gltf_output.gltf
</span></code></pre><p>This will automatically export your Blender file to <a href=https://www.khronos.org/gltf/>glTF</a>.<p>To change the export format change the <code>export_format='GLTF_EMBEDDED'</code> below to <code>'GLB'</code> (binary format), <code>'GLTF_EMBEDDED'</code> (JSON-like format) and <code>'GLTF_SEPARATE'</code> (JSON-like + binary packed format).<pre class=language-python data-lang=python style=color:#c0c5ce;background-color:#2b303b><code class=language-python data-lang=python><span style=color:#b48ead>import </span><span>bpy
</span><span style=color:#b48ead>import </span><span>sys
</span><span style=color:#b48ead>import </span><span>os
</span><span>
</span><span style=color:#bf616a>OUTPUT_FILE</span><span>=sys.argv[-</span><span style=color:#d08770>1</span><span>]
</span><span style=color:#bf616a>OUTPUT_DIR </span><span>= os.path.</span><span style=color:#bf616a>dirname</span><span>(os.path.</span><span style=color:#bf616a>abspath</span><span>(</span><span style=color:#bf616a>OUTPUT_FILE</span><span>))
</span><span>
</span><span style=color:#96b5b4>print</span><span>("</span><span style=color:#a3be8c>Blender export scene in glTF Format to file '</span><span>" + </span><span style=color:#bf616a>OUTPUT_FILE </span><span>+ "</span><span style=color:#a3be8c>' in directory: '</span><span>" + </span><span style=color:#bf616a>OUTPUT_DIR </span><span>+ "</span><span style=color:#a3be8c>'.</span><span>")
</span><span>
</span><span style=color:#65737e># https://docs.blender.org/api/current/bpy.ops.export_scene.html#bpy.ops.export_scene.gltf
</span><span>bpy.ops.export_scene.</span><span style=color:#bf616a>gltf</span><span>(
</span><span>    </span><span style=color:#65737e># Output File
</span><span>    </span><span style=color:#bf616a>filepath</span><span>=</span><span style=color:#bf616a>OUTPUT_FILE</span><span>,
</span><span>    </span><span style=color:#65737e># Don't warn if existing and overwrite
</span><span>    </span><span style=color:#bf616a>check_existing</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#65737e># glTF Light
</span><span>    </span><span style=color:#bf616a>convert_lighting_mode</span><span>='</span><span style=color:#a3be8c>SPEC</span><span>', 
</span><span>    </span><span style=color:#65737e># glTF Format
</span><span>    </span><span style=color:#bf616a>export_format</span><span>='</span><span style=color:#a3be8c>GLTF_EMBEDDED</span><span>', 
</span><span>    </span><span style=color:#65737e># Copyright
</span><span>    </span><span style=color:#bf616a>export_copyright</span><span>='</span><span style=color:#a3be8c>Bevy-Game</span><span>', 
</span><span>    </span><span style=color:#65737e># Image format
</span><span>    </span><span style=color:#bf616a>export_image_format</span><span>='</span><span style=color:#a3be8c>AUTO</span><span>', 
</span><span>    </span><span style=color:#65737e># Texture output directory
</span><span>    </span><span style=color:#bf616a>export_texture_dir</span><span>=</span><span style=color:#bf616a>OUTPUT_DIR</span><span>, 
</span><span>    </span><span style=color:#65737e># What to export
</span><span>    </span><span style=color:#65737e>## Careful with PBR textures!
</span><span>    </span><span style=color:#bf616a>export_keep_originals</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#bf616a>export_texcoords</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#bf616a>export_normals</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#bf616a>export_tangents</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#bf616a>export_materials</span><span>='</span><span style=color:#a3be8c>EXPORT</span><span>', 
</span><span>    </span><span style=color:#bf616a>export_original_specular</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#bf616a>export_colors</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#bf616a>export_attributes</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#bf616a>use_mesh_edges</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#bf616a>use_mesh_vertices</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#65737e># No compression (Bevy doesn't support)
</span><span>    </span><span style=color:#bf616a>export_draco_mesh_compression_enable</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#65737e># Selection of what is exported (everything "visible")
</span><span>    </span><span style=color:#bf616a>use_visible</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#bf616a>use_selection</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#bf616a>use_renderable</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#bf616a>use_active_collection_with_nested</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#bf616a>use_active_collection</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#bf616a>use_active_scene</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#65737e># Camera will be added by Bevy
</span><span>    </span><span style=color:#bf616a>export_cameras</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#65737e># Lights will be added by Bevy
</span><span>    </span><span style=color:#bf616a>export_lights</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#65737e># Anything special (might break things!)
</span><span>    </span><span style=color:#bf616a>export_extras</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#65737e># Axis for export (Y+ Up)
</span><span>    </span><span style=color:#bf616a>export_yup</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>    </span><span style=color:#65737e># Apply modifiers
</span><span>    </span><span style=color:#bf616a>export_apply</span><span>=</span><span style=color:#d08770>False</span><span>, 
</span><span>    </span><span style=color:#65737e># Remember export settings, nice for debugging!
</span><span>    </span><span style=color:#bf616a>will_save_settings</span><span>=</span><span style=color:#d08770>True</span><span>, 
</span><span>)
</span></code></pre><h2 id=afterwords>Afterwords</h2><p>I hope this will help anyone. I’d wish I would have found such a resource and wouldn’t have figured all of this out myself.<p>As mentioned before, if you run into any trouble, need help or found an issue with my write-up, please <a href=https://github.com/Sakul6499/sakul6499.github.io/issues/new>open an issue</a> or <a href=https://github.com/Sakul6499/sakul6499.github.io/discussions/new>start a discussion</a> on my <a href=https://github.com/Sakul6499/sakul6499.github.io>GitHub repository</a>!</div></div></article><hr><section id=footer><p class=has-text-centered>Made with <span class="icon has-text-danger"><i class="fas fa-heart fas fa-1x"></i></span> by @Sakul6499<p class=has-text-centered>© 2025 @Sakul6499 | @SakulFlee | Lukas Weber, Some Rights Reserved.<div class="buttons columns mt-4 is-centered"><a class="button is-normal mr-4 ml-4" href=/contact> <span class="icon is-medium"> <i class="fas fa-address-card"></i> </span> <span>Contact</span> </a><a class="button is-normal mr-4 ml-4" href=/credits> <span class="icon is-medium"> <i class="fas fa-star"></i> </span> <span>Credits</span> </a><a class="button is-normal mr-4 ml-4" href=/legal> <span class="icon is-medium"> <i class="fas fa-balance-scale"></i> </span> <span>Legal</span> </a></div></section>